<script src="../../node_modules/redux-saga/dist/redux-saga.js"></script>

<script>

    (function() {
        const effects = ReduxSaga.effects;

        // worker Saga: will be fired on USER_FETCH_REQUESTED actions
        function* loadList(action) {
            try {
                yield effects.put(MyApp.actions.showSpinner(true));
                let result = [1, 2, 3, 4, 5];
                yield effects.call(delay, 2000)
                yield effects.put(MyApp.actions.setLoadedList(result));
                yield effects.put(MyApp.actions.showSpinner(false));
            } catch (e) {
                yield effects.put(MyApp.actions.clearLoadedList());
                yield effects.put(MyApp.actions.showSpinner(false));
            }
        }

        /*
          Starts fetchUser on each dispatched `USER_FETCH_REQUESTED` action.
          Allows concurrent fetches of user.
        */
        function* rootSaga() {
            yield effects.takeEvery("LOAD_LIST", loadList);
        }


        MyApp.rootSaga = rootSaga;

    }());
</script>